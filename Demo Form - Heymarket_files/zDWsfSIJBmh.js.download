if (self.CavalryLogger) { CavalryLogger.start_js(["Qg2MKMJ"]); }

__d("MNCommerceLogger",["BanzaiLogger","ODS"],(function(a,b,c,d,e,f,g){"use strict";var h=c("BanzaiLogger").create({signal:!0});function i(a){switch(a){case"devx_upsell_learn_more_clicked":return"devx.upsell.learn_more.clicked";default:return a}}function a(a,b,c){d("ODS").bumpEntityKey(2966,"messenger_commerce",i(a)),h.log("MessengerCommerceLoggerConfig",{brand_app_id:b,user_fbid:c,event:a})}function b(a,b,c,e){h.log("MessengerCommerceLoggerConfig",{brand_app_id:a,page_id:b,user_fbid:c,event:e}),d("ODS").bumpEntityKey(2966,"messenger_commerce","auth."+e+".all")}g.logClick=a;g.logAuthEvent=b}),98);
__d("PluginMessengerMessageUs",["Event","MNCommerceLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f){c("Event").listen(a,"click",function(){d("MNCommerceLogger").logAuthEvent(b,e,f,"message_us_clicked")})}g.setupMessageUsLogging=a}),98);
__d("XMNSendToMessengerContinueAsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/plugins/messenger_platform/send_to_messenger/",{next:{type:"String",required:!0},page_id:{type:"String",required:!0},app_id:{type:"String",required:!0},ref:{type:"String"},switch_user:{type:"String"},is_inapp_browser:{type:"Bool",defaultValue:!1}})}),null);
__d("PluginSendToMessenger",["Arbiter","CSS","DOMEvent","DOMEventListener","FormSubmit","MNCommerceLogger","Plugin","PluginDOMEventListener","PluginMessage","PluginOptin","PluginResize","PopupWindow","URI","UnverifiedXD","XMNSendToMessengerContinueAsController"],(function(a,b,c,d,e,f,g){"use strict";var h=13;a=function(){function a(a,b,e,f,g,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=this;this.$1=!1;c("PluginResize").auto(s);(!g||k&&!l)&&d("CSS").hide(f);l=function(a,b){return d("PluginDOMEventListener").add(a,"click",function(a){n==="0"&&u&&location.reload(),b(a)})};f=function(a){return d("DOMEventListener").add(a,"keydown",function(b){b.keyCode===h&&a.click()})};v=u&&v;if(g){g=new(c("URI"))(window.location.search).getQueryData();g.reload==="reload"&&(this.$1=!0,g.id===m&&(d("CSS").show(b),d("CSS").hide(a)));g.act==="send"&&!v&&(d("CSS").show(b),d("CSS").hide(a),i&&this.submit(s));v&&(this.submit(s),d("CSS").show(b),d("CSS").hide(a))}g=function(e){d("MNCommerceLogger").logAuthEvent(p,o,n,"send_to_messenger_clicked");c("UnverifiedXD").send({type:"sdk_event",event:"send_to_messenger",data:JSON.stringify({event:"clicked",ref:q})});if(k||!r&&!w.$1){new(c("DOMEvent"))(e).kill();if(!j)new(c("PluginOptin"))("send_to_messenger").addLoginParams({logged_in:w.isLoggedInUncached(),switch_user:k,page_id:o,app_id:p,ref:q,connected:!1,is_inapp_browser:!1,show_subtitle:!0}).addReturnParams({act:"send"}).start();else if(t!=null){e=c("XMNSendToMessengerContinueAsController").getURIBuilder().setString("next",t.toString()).setString("page_id",o).setString("app_id",p).setString("ref",q).setBool("is_inapp_browser",!0).getURI();d("PopupWindow").open(e.toString(),420,450)}}else d("MNCommerceLogger").logAuthEvent(p,o,n,"send_to_messenger_opt_in_client_event"),w.submit(s),d("CSS").show(b),d("CSS").hide(a),c("UnverifiedXD").send({type:"sdk_event",event:"send_to_messenger",data:JSON.stringify({event:"opt_in",ref:q})})};i=function(a){c("UnverifiedXD").send({type:"sdk_event",event:"send_to_messenger",data:JSON.stringify({event:"not_you",ref:q})}),new(c("PluginOptin"))("send_to_messenger").addLoginParams({logged_in:!1,switch_user:!0,page_id:o,app_id:p,ref:q,connected:r,is_inapp_browser:j,show_subtitle:!0}).addReturnParams({act:"send"}).start(),d("PluginMessage").listen()};l(a,g);f(a);e!=null&&(l(e,i),f(e));v=function(c,e){e.identifier===m&&(d("CSS").show(b),d("CSS").hide(a))};c("Arbiter").subscribe(d("Plugin").CONNECT,v)}var b=a.prototype;b.isLoggedInUncached=function(){var a="c_user=",b=decodeURIComponent(document.cookie);b=b.split(";");var c="0";b.forEach(function(b,d){d=b;while(d.charAt(0)==" ")d=d.substring(1);d.indexOf(a)==0&&(c=d.substring(a.length,d.length))});return c!=="0"};b.submit=function(a){c("FormSubmit").send(a)};return a}();g["default"]=a}),98);